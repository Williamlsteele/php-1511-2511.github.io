tidy2 <- tidy(mod2)[-1, -c(3:4)]
tidy3 <- tidy(mod3)[-1, -c(3:4)]
tidy5 <- tidy(mod5)[-1, -c(3:4)]
tidy6 <- tidy(mod6)[-1, -c(3:4)]
kable(bind_rows(tidy1:tidy6))
kable(bind_rows(c(tidy1:tidy6)))
kable(bind_rows(tidy1,tidy2,tdiy3,tidy4,tidy5,tidy6))
kable(bind_rows(tidy1,tidy2,tidy3,tidy4,tidy5,tidy6))
mod7 <- lm(sat~expend+ratio, data=sat)
summary(mod7)
mmps(mod1)
ols_rsd_plot(mod1)
library(olsrr)
ols_rsd_plot(mod1)
ols_rvsp_plot(mod1)
mod7 <- lm(sat~expend*ratio, sat)
summary(mod7)
read_xls("http://college.cengage.com/mathematics/brase/understandable_statistics/7e/students/datasets/mlr/excel/mlr06.xls")
library(readxl)
read_xls("http://college.cengage.com/mathematics/brase/understandable_statistics/7e/students/datasets/mlr/excel/mlr06.xls")
library(readxl)
read_xls("crimes.xlsx")
read_excel("crimes.xlsx")
library(readxl)
read_excel("crimes.xlsx")
library(readxl)
crimes <- read_excel("labs/crimes.xlsx")
View(crimes)
library(tidyverse)
crimes <- crimes %>%
rename( tot_crime = X1,
rep_crime = X2,
pol_fund = X3,
`25plus_hs` = X4,
not_hs_grad = X5,
in_college = X6,
college = X7  )
library(broom)
library(tidyverse)
library(knitr)
mod1 <- lm(tot_crime~rep_crime, data=crimes)
mod2 <- lm(tot_crime~pol_fund, data=crimes)
mod3 <- lm(tot_crime~`25plus_hs`, data=crimes)
mod4 <- lm(tot_crime~not_hs_grad, data=crimes)
mod5 <- lm(tot_crime~in_college, data=crimes)
mod6 <- lm(tot_crime~college, data=crimes)
tidy1 <- tidy(mod1)[-1, -c(3:4)]
tidy2 <- tidy(mod2)[-1, -c(3:4)]
tidy3 <- tidy(mod3)[-1, -c(3:4)]
tidy4 <- tidy(mod4)[-1, -c(3:4)]
tidy5 <- tidy(mod5)[-1, -c(3:4)]
tidy6 <- tidy(mod6)[-1, -c(3:4)]
kable(bind_rows(tidy1,tidy2,tidy3,tidy4,tidy5,tidy6))
library(GGally)
ggcorr(crimes, colour="gray20")
ggpairs(crimes)
library(olsrr)
?ols_corr_test
model <- lm(mpg ~ disp + hp + wt + qsec, data = mtcars)
ols_corr_test(model)
5.99+119.99+2.65+7.99+5.49+10.62+6.69+23.22+6.41+74.25+37.92+15+5.99+64.30+12+24.13+41.2+26.74+36.48+17.98+81.87+3.99+7.18+36.95+6.98+12.39+20.6+72.19+15+43.15+56.09+99+143.81+5.66+775+54.98+9.28+79+65+90+9.81+120.35+30.96+74.80+5.59+62.46+569.31+88.16+19.99+21.3+2.95+25.97+5.66+35+7.22+24.29+14+14.23+82.78+61.19+6.55+32.5+17.68+4.99+64.11+63.50+8.56
5.99+119.99+2.65+7.99+5.49+10.62+6.69+23.22+6.41+74.25+37.92+15+5.99+64.30+12+24.13+41.2+26.74+36.48+17.98+81.87+3.99+7.18+36.95+6.98+12.39+20.6+72.19+15+43.15+56.09+99+143.81+5.66+775+54.98+9.28+79+65+90+9.81+120.35+30.96+74.80+5.59+62.46+569.31+88.16+19.99+21.3+2.95+25.97+5.66+35+7.22+24.29+14+14.23+82.78+61.19+6.55+32.5+17.68+4.99+64.11+63.50+8.56-139.99
3485.32-775-119.99-24.13-41.20-26.74-36.48-569.31-63.50-32.72
3485.32-1796.25
6579*8/2
knitr::opts_chunk$set(echo = TRUE)
library(broom)
library(knitr)
library(dplyr)
library(MASS)
library(knitr)
library(ResourceSelection)
library(caret)
install.packages("caret")
knitr::opts_chunk$set(echo = TRUE)
library(broom)
library(knitr)
library(dplyr)
library(MASS)
library(knitr)
library(ResourceSelection)
library(caret)
library(car)
url <- "https://www.umass.edu/statdata/statdata/data/burn/burn1000.dat"
burn <- read.table(url, header = F)
url <- "https://www.umass.edu/statdata/statdata/data/burn/burn1000.dat"
burn <- read.table(url, header = F)
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(warning=FALSE)
knitr::opts_chunk$set(message=FALSE)
knitr::opts_chunk$set(results="hold")
knitr::opts_chunk$set(cache=F)
low.weight <- read.table("https://drive.google.com/uc?export=download&id=0B8CsRLdwqzbzMzJyVkt5QkdvVnM", header=TRUE, sep=",")
mod <- glm(low~race*smoke, data=low.weight)
summary(mod)
mod <- glm(low~race*smoke, data=low.weight, family="binomial")
summary(mod)
mod <- glm(low~race*age, data=low.weight, family="binomial")
summary(mod)
load("C:/Users/adam_/Dropbox (Personal)/Brown/Teaching/Brown Courses/PHP2511/Spring 2018/website/php-1511-2511.github.io/labs/sat.RData")
library(readxl)
crimes <- read_excel("labs/crimes.xlsx")
View(crimes)
library(haven)
sah <- read_dta("Notes/Lec-11-logistic-3/sah.dta")
View(sah)
mod <- glm(dead~sah*age, data=sah, family="binomial")
summary(mod)
load(url("http://www.karlin.mff.cuni.cz/~maciak/NMSA407/nmsa407_hw3_2016.RData"))
load(url("http://www.karlin.mff.cuni.cz/~maciak/NMSA407/nmsa407_hw3_2016.RData"))
boxplot(hippo~diagnosis, data=DATA)
Titanic
titanic <- Titanic
data("Titanic")
titanic <- data("Titanic")
??Titanic
titanic <- read.csv("C:/Users/adam_/Desktop/titanic.csv")
View(titanic)
summary(glm(survived~sex*pclass, family="binomial", data=titanic))
summary(glm(survived~age*pclass, family="binomial", data=titanic))
summary(glm(survived~fare*pclass, family="binomial", data=titanic))
summary(glm(survived~boat*pclass, family="binomial", data=titanic))
summary(glm(survived~body*pclass, family="binomial", data=titanic))
summary(glm(survived~embarked*pclass, family="binomial", data=titanic))
summary(glm(survived~sex*age, family="binomial", data=titanic))
getwd()
save(titanic, file="homework/titanic.RData")
load("homework/titanic/RData")
load("homework/titanic.RData")
library(olsrr)
ols_rvsp_plot(fit5)
mmps(fit5)
library(car)
mmps(fit5)
cigs <- cigs %>%
mutate(nicotine_bin = cut(nicotine, 2, labels=c("low", "high")))
library(tidyverse)
cigs <- cigs %>%
mutate(nicotine_bin = cut(nicotine, 2, labels=c("low", "high")))
library(knitr)
options(digits=3)
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(warning=FALSE)
knitr::opts_chunk$set(message=FALSE)
knitr::opts_chunk$set(results="hold")
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(echo=FALSE)
fit6 <- glm(data=cigs, nicotine_bin~tar+weight, family="binomial")
summary(fit6)
library(knitr)
options(digits=3)
knitr::opts_chunk$set(error = TRUE)
knitr::opts_chunk$set(warning=FALSE)
knitr::opts_chunk$set(message=FALSE)
knitr::opts_chunk$set(results="hold")
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(echo=FALSE)
cigs <- read.table("http://www.amstat.org/publications/jse/datasets/cigarettes.dat.txt")
names(cigs) <- c("brand", "tar", "nicotine", "weight", "CO" )
library(tidyverse)
library(broom)
library(knitr)
fit1 <- lm(CO ~tar, data=cigs)
fit2 <- lm(CO ~nicotine, data=cigs)
fit3 <- lm(CO ~weight, data=cigs)
tidy1 <- tidy(fit1, conf.int=T)[-1,-c(3:4)]
tidy2 <- tidy(fit2, conf.int=T)[-1,-c(3:4)]
tidy3 <- tidy(fit3, conf.int=T)[-1,-c(3:4)]
kable(bind_rows(tidy1,tidy2,tidy3))
glance1 <- glance(fit1)
glance2 <- glance(fit2)
glance3 <- glance(fit3)
tab <- bind_rows(glance1,glance2,glance3)[,c(1:5)]
rownames(tab) <- c("tar", "nicotine", "weight")
kable(tab)
fit4 <- lm(CO ~tar+nicotine+weight, data=cigs)
tidy4 <- tidy(fit4, conf.int=T)[-1,-c(3:4)]
kable(tidy4)
glance4 <- glance(fit4)
kable(glance4[,c(1:5)])
library(car)
vif(fit4)
library(tidyverse)
cigs <- cigs %>%
mutate(nicotine_bin = cut(nicotine, 2, labels=c("low", "high")))
fit5 <- lm(data=cigs, CO~tar*nicotine_bin)
kable(tidy(fit5, conf.int=T)[,-c(3:4)])
kable(glance(fit5)[,c(1:5)])
fit6 <- glm(data=cigs, nicotine_bin~tar+weight, family="binomial")
summary(fit6)
fit6 <- glm(data=cigs, nicotine_bin~tar, family="binomial")
summary(fit6)
8 + 3 + 6 + 4 + 6+ 4 + 7 + 3 + 3 + 8 + 3 + 5 +6
8 +3 + 6 + 4 +6+4 + 7 + 3 + 3 + 8 + 3 + 5 + 6
fit6 <- lm(data=cigs, CO~tar+nicotine_bin)
anova(fit5,fit6)
8+3+6+4+6+4+7+3+3+8+5+3+5+6
8+3+6+4+6+4+7+3+3+8+5+3+5+6
8+6+4+6+4+7+3+3+8+5+3+6+5
8+6+4+6+4+7+3+3+8+5+3+6
8+6+4+6+4+7+3+3+8+5+3+6
library(knitr)
?kab le
?kable
8 + 8 + 29+ 10+20+25
knitr::opts_chunk$set(echo = TRUE)
library(readr)
schedule <- read_csv("../_csv/project2.csv")
options(knitr.kable.NA = '')
knitr::kable(schedule, format="markdown", row.names = FALSE)
library(knitr)
opts_chunk$set(error = TRUE)
opts_chunk$set(warning=FALSE)
opts_chunk$set(message=FALSE)
opts_chunk$set(results="hold")
opts_chunk$set(cache=F)
opts_chunk$set(  tidy=TRUE,size="small")
opts_chunk$set(tidy.opts=list(width.cutoff=60))
options(digits = 3, scipen = 3)
library(survival)
model <- survfit(Surv(followup,status!=0) ~ tment,
data = subset(pbc3, followup>0))
summary(model)
library(survminer)
ggsurvplot(model, conf.int=TRUE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Placebo", "Treatment"), break.time.by=.5)
library(survival)
model <- survdiff(Surv(followup,status!=0) ~ tment,
data = subset(pbc3, followup>0))
model
library(survival)
model <- survfit(Surv(followup,status!=0) ~ unit,
data = subset(pbc3, followup>0))
summary(model)
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(phscrc$alcohol>0, labels=c("no", "yes")))
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(phscrc$alcohol>0, labels=c("no", "yes")))
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(phscrc$alcohol>0, labels=c("no", "yes")))
library(survival)
model <- survfit(Surv(cayrs,crc) ~ alcohol.use,
data = phscrc)
summary(model)
library(survival)
model <- survfit(Surv(followup,status!=0) ~ tment,
data = subset(pbc3, followup>0))
library(survival)
model <- survfit(Surv(cayrs,crc) ~ alcohol.use,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=TRUE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=.5)
library(survminer)
ggsurvplot(model, conf.int=TRUE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survival)
model <- survfit(Surv(cayrs,crc) ~asa,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survival)
model <- survfit(Surv(cayrs,crc) ~dm,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
model <- survfit(Surv(cayrs,crc) ~exer,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
summary(pscrc$bmi)
summary(phscrc$bmi)
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factoralcohol>0, labels=c("no", "yes")) %>%
mutate(obese = factor(bmi>30, labels=c("Not Obese", "Obese"))
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(alcohol>0, labels=c("no", "yes")) %>%
mutate(obese = factor(bmi>30, labels=c("Not Obese", "Obese"))
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(phscrc$alcohol>0, labels=c("no", "yes")) %>%
mutate(obese = factor(phscrc$bmi>30, labels=c("Not Obese", "Obese"))
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(alcohol>0, labels=c("no", "yes"))) %>%
mutate(obese = factor(bmi>30, labels=c("Not Obese", "Obese")))
model <- survfit(Surv(cayrs,crc) ~obese,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survival)
model <- survfit(Surv(cayrs,crc) ~hypert,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survival)
model <- survfit(Surv(cayrs,crc) ~csmoke,
data = phscrc)
library(survival)
model <- survfit(Surv(cayrs,crc) ~csmok,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker", "t"), break.time.by=2)
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker", "t"), break.time.by=2)
?ggsurvplot
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(alcohol>1, labels=c("no", "yes"))) %>%
mutate(obese = factor(bmi>30, labels=c("Not Obese", "Obese")))
library(survival)
model <- survfit(Surv(cayrs,crc) ~ alcohol.use,
data = phscrc)
model
library(survival)
model <- survfit(Surv(cayrs,crc) ~csmok,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker", "t"), break.time.by=2)
library(survival)
model <- survfit(Surv(cayrs,crc) ~alcohol.use,
data = phscrc)
model
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker", "t"), break.time.by=2)
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2)
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2, ylim=c(0.75,1))
library(survminer)
ggsurvplot(model, conf.int=FALSE, risk.table=TRUE,
risk.table.col="strata", legend.labs =
c("Non-Drinker", "Drinker"), break.time.by=2, ylim=c(0.95,1))
model <- survdiff(Surv(cayrs,crc) ~ alcohol.use,
data = phscrc)
model
summary(phscrc$cayrs)
sum(phscrc$cayrs==0)
sum(phscrc$cayrs==0, na.rm=T)
sum(phscrc$cayrs>0, na.rm=T)
library(survival)
model <- survfit(Surv(cayrs,crc) ~ alcohol.use,
data = subset(phscrc, cayrs>0))
model
model <- survdiff(Surv(cayrs,crc) ~ alcohol.use,
data = subset(phscrc, cayrs>0))
model
model <- survdiff(Surv(cayrs,crc) ~ alcohol.use,
data = subset(phscrc, cayrs>0))
model
model <- survfit(Surv(cayrs,crc) ~csmok,
data = subset(phscrc, cayrs>0))
model
library(survminer)
ggsurvplot(model, conf.int=TRUE, risk.table=TRUE,
risk.table.col="strata", break.time.by=2)
library(survminer)
ggsurvplot(model, conf.int=TRUE, risk.table=TRUE,
risk.table.col="strata", break.time.by=2, ylim=c(0.95,1))
library(car)
vif(model)
library(knitr)
opts_chunk$set(error = TRUE)
opts_chunk$set(warning=FALSE)
opts_chunk$set(message=FALSE)
opts_chunk$set(results="hold")
opts_chunk$set(cache=T)
opts_chunk$set(  tidy=TRUE,size="small")
opts_chunk$set(tidy.opts=list(width.cutoff=60))
options(digits = 3, scipen = 3)
library(survminer)
ggsurvplot(model, legend.labs =
c("Non-Drinker", "Drinker"),
break.time.by=.5, fun="cloglog")
library(survival)
model <- survfit(Surv(cayrs,crc) ~ alcohol.use,
data = subset(phscrc, cayrs>0))
model
library(survminer)
ggsurvplot(model, legend.labs =
c("Non-Drinker", "Drinker"),
break.time.by=.5, fun="cloglog")
library(survminer)
ggsurvplot(model, legend.labs =
c("Non-Drinker", "Drinker"),
break.time.by=2, fun="cloglog")
library(survminer)
ggsurvplot(model, legend.labs =
c("Non-Drinker", "Drinker"),
break.time.by=2, fun="cloglog")
cox.crc <- coxph(Surv(cayrs,crc) ~ alcohol.use,
data = subset(phscrc, cayrs>0))
summary(cox.crc)
library(survival)
crc.cox <- coxph(Surv(cayrs, crc) ~ csmok + age , data= subset(phscrc, cayrs>0))
summary(crc.cox)
library(knitr)
opts_chunk$set(error = TRUE)
opts_chunk$set(warning=FALSE)
opts_chunk$set(message=FALSE)
opts_chunk$set(results="hold")
opts_chunk$set(cache=T)
opts_chunk$set(  tidy=TRUE,size="small")
opts_chunk$set(tidy.opts=list(width.cutoff=60))
options(digits = 3, scipen = 3)
model <- survfit(Surv(cayrs,crc) ~csmok,
data = subset(phscrc, cayrs>0))
model
ggsurvplot(model, conf.int=TRUE, risk.table=TRUE,
risk.table.col="strata", break.time.by=2, ylim=c(0.95,1))
load("C:/Users/adam_/Dropbox (Personal)/Brown/Teaching/Brown Courses/PHP2511/Spring2017/Labs/brfss.rda")
load("C:/Users/adam_/Dropbox (Personal)/Brown/Teaching/Brown Courses/PHP2511/Spring2017/Labs/brfss.rda")
library(knitr)
opts_chunk$set(error = TRUE)
opts_chunk$set(warning=FALSE)
opts_chunk$set(message=FALSE)
opts_chunk$set(results="hold")
opts_chunk$set(cache=F)
opts_chunk$set(  tidy=TRUE,size="small")
opts_chunk$set(tidy.opts=list(width.cutoff=60))
options(digits = 3, scipen = 3)
phscrc$mean.cent.age <- phscrc$age - mean(phscrc$age, na.rm=TRUE)
fit5 <- glm(crc~alcohol.use + mean.cent.age + offset(log(cayrs)), data=phscrc, family=poisson(link='log'))
library(knitr)
opts_chunk$set(error = TRUE)
opts_chunk$set(warning=FALSE)
opts_chunk$set(message=FALSE)
opts_chunk$set(results="hold")
opts_chunk$set(cache=F)
opts_chunk$set(  tidy=TRUE,size="small")
opts_chunk$set(tidy.opts=list(width.cutoff=60))
options(digits = 3, scipen = 3)
library(tidyverse)
library(haven)
phscrc <- read_dta("phscrc.dta")
phscrc <- phscrc %>%
mutate(age.cat = cut(age, c(40,50,60,70, 90), right=FALSE)) %>%
mutate(alcohol.use = factor(phscrc$alcohol>0, labels=c("no", "yes")))
phscrc$mean.cent.age <- phscrc$age - mean(phscrc$age, na.rm=TRUE)
fit5 <- glm(crc~alcohol.use + mean.cent.age + offset(log(cayrs)), data=phscrc, family=poisson(link='log'))
summary(fit5, dispersion=.7)
summary(fit5, dispersion=1.7)
